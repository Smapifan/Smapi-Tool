<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>SMAPI-KI Browser Test v0.5</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="tools/style.css">
  <script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
  <style>
    body { font-family: system-ui, Arial; background:#0f1115; color:#eaeaea; margin:0; padding:0; }
    header { background:#1b1f2a; padding:16px; font-size:20px; font-weight:bold; color:#ff4d4d; }
    main { padding:16px; max-width:900px; margin:auto; }
    textarea { width:100%; min-height:120px; background:#151923; color:#eaeaea; border:1px solid #333; border-radius:6px; padding:10px; resize:vertical; }
    button { margin-top:10px; padding:10px 16px; font-size:16px; background:#ff4d4d; color:#000; border:none; border-radius:6px; cursor:pointer; }
    button:hover { background:#ff6666; }
    pre { margin-top:20px; background:#0b0d12; padding:12px; border-radius:6px; overflow-x:auto; white-space:pre-wrap; }
    .hint { font-size:13px; opacity:0.8; margin-top:8px; }
  </style>
</head>
<body>
  <header>SMAPI-KI Browser Test v0.5</header>
  <main>
    <textarea id="input" placeholder="z.B. Erstelle eine SMAPI Mod mit NPC"></textarea>
    <button onclick="runPythonAI()">KI ausführen</button>
    <div class="hint">Python-KI läuft lokal via Pyodide</div>
    <pre id="output"></pre>
  </main>

  <script type="text/javascript">
    let pyodideReady = false;
    let pyodide;

    async function loadPyodideAndPackages() {
      pyodide = await loadPyodide();
      pyodideReady = true;
      await pyodide.loadPackage(['micropip']);
      await pyodide.runPythonAsync(`
import sys
sys.path.append('Ai')
      `);
    }

    loadPyodideAndPackages();

    async function runPythonAI() {
      if (!pyodideReady) {
        alert('KI wird geladen, bitte kurz warten...');
        return;
      }

      const userInput = document.getElementById('input').value;
      const code = `
from smapi_ki import SMAPI_KI
output = SMAPI_KI.process('''${userInput}''')
output
`;
      try {
        let result = await pyodide.runPythonAsync(code);
        document.getElementById('output').textContent = result;
      } catch(err) {
        document.getElementById('output').textContent = 'Fehler: ' + err;
      }
    }
  </sc
